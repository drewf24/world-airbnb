---
title: "NYC Airbnnb Popularity Factors"
author: "Team World"
date: "10/24/2019"
output: github_document
---

### Section 1. Introduction

Using the Airbnb dataset, we hope to gain a better understanding of the gig hospitality market in New York City for 2019. Specifically, we want to find, explore and understand trends in the market as they relate to supply (availability) and demand (what people are willing to pay). The data set we chose allows us to draw conclusions and understand the factors that contribute to the New York City Airbnb scene. 

Through Kaggle, we found this data set (https://www.kaggle.com/dgomonov/new-york-city-airbnb-open-data) that was collected, and continues to be updated, in 2019 on Airbnb listings in New York City. This data set continues to be curated by a 4th year data science student at Drexel University (Dgomonov). We are unable to reach out to him to get more information on the data set, such as where he got it from or how he collected it, because our account on Kaggle is not at the "Contributor tier." 

To analyze this data set it is first important to understand its variables which include: listing ID, name of the listing, host ID, name of the host, location, neighbourhood, latitude and longitude coordinates, room type, price in dollars, minimum_nights, number of reviews, latest review, number of reviews per month, amount of listing per host and availability. A description of each of these is included in the codebook. 

Based on these factors, it seems as though price and availibility would make the most interesting response variables because they are very important to understand the economic landscape. For example someone who is looking to book an Airbnb is going to be very interested in what is available within their budget. Of course there are going to be other factors that are important to a consumer, such as location within NYC. However, we expect availability and price to be the most predictive and representative of the Airbnbs in New York City.

Some variables from the dataset that would be interesting to explore in section two that pertain to location include the borough, neighborhood, latitude, and longitude. We know that in real estate location highly influences value, especially in a large, wealthy, productive city like New York. We hope to explore how location influences potential response variables such as availability and price.

We also hope to explore how the listing is presented on the Airbnb platform might influence consumer choices. Some variables that could be insightful include the name of the listing which we may use text analysis to analyze. Each observation is also classified as one of three room types: private room, shared room and entire home/apt. Moreover, minimum nights required to stay and frequency of reviews are also included. We hope to see how this mix of categorical and numerical values impact one of the potential response variables. 

Although section two is preliminary exploration, various tools from the course such as the group_by function, the summarise function, linear modeling, and possible joining with outside data to draw meaningful insights. Clear and specific notation will be employed to make sure analysis is reproducible.

### Section 2. Exploratory data analysis

### Load packages & data

Loaded the tidyverse and broom packages:

```{r load-packages, message=FALSE}
library(tidyverse) 
library(broom)
```

Uploaded the Airbnb data set from Kaggle via a csv file:

```{r load-data, message=FALSE}
abnb <- read_csv("AB_NYC_2019.csv")
```

LOCATION AND PRICE:

Univariate Borough Count (Visualization):

```{r visualization-univariate}
ggplot(data = abnb, mapping = aes(x = neighbourhood_group)) +
  geom_histogram(stat = "count") + 
  labs(title = "Listings by Borough", x = "Borough", y = "Count")
```

Univariate Borough Count (Summary)
```{r neighbourhood_group-count}
abnb %>%
  count(neighbourhood_group) %>%
  arrange(desc(n))
```

```{r price-borough}
abnb %>%
  ggplot(mapping = aes(x = price)) +
  geom_histogram(bins=35) +
  facet_wrap(.~neighbourhood_group)
  labs(title = "Price of Listings by Borough", x = "Borough", y = "Price")
```

Lots of right skew...

```{r summarise-price}
abnb %>%
  group_by(neighbourhood_group) %>%
  summarise(
    med_price = median(price), 
    IQR_price = IQR(price)
    ) %>%
  arrange(desc(med_price)) %>%
  head(5)
```


```{r neighbourhood_group-neighbourhood}
abnb %>%
  group_by(neighbourhood_group, neighbourhood) %>%
  summarise(median_price = median(price)) %>%
  arrange(desc(median_price)) %>%
  head(5)
```

```{r}
abnb %>%
  ggplot(mapping = aes (x = longitude, y = latitude, color = price)) +
  geom_point(alpha = 0.6)
```


LISTING DETAILS AND AVAILABILITY


```{r message=FALSE}
abnb %>%
  ggplot(mapping = aes(x = availability_365)) +
  geom_histogram(binwidth=80) + 
  labs(title = "Availability of Listings Distribution",
       x = "Availability (days per year)",
       y = "Count"
  )
```

```{r room_type-availability_365, message=FALSE}
abnb %>%
  ggplot(mapping = aes(x =  room_type, y = availability_365)) +
  geom_boxplot() + 
  labs(
    title = "Availability by Room Type",
    x = "Room Type", 
    y = "Availability (days per year)")
```

```{r}
abnb %>%
  group_by(room_type) %>%
  summarise(
    med_availability_365 = median(availability_365), 
    IQR_availability_365 = IQR(availability_365)
    ) %>%
  arrange(desc(med_availability_365)) %>%
  head(5)
```

```{r summarise-room_type}
abnb %>%
  group_by(room_type) %>%
  summarise(
    med_availability_365 = median(availability_365), 
    IQR_availability_365 = IQR(availability_365)
    ) %>%
  arrange(desc(med_availability_365)) %>%
  head(5)
```

```{r}
abnb %>%
  mutate(avail = case_when(
    availability_365 < 100            ~ "Very Busy",
    availability_365 < 200 && availability_365 > 100  ~ "Somewhat Busy",
    availability_365 > 300    ~ "Not Busy",)
    ) %>%
ggplot(mapping = aes(x = room_type, fill = avail)) +
  geom_bar(position = "fill")
```

Note that there are NAs.

```{r avail-by-room_type-reviews, message=FALSE}
abnb %>%
  mutate(avail = case_when(
    availability_365 < 100            ~ "Very Busy",
    availability_365 >= 100 & availability_365 <= 300  ~ "Somewhat Busy",
    availability_365 > 300    ~ "Not Busy",)
    ) %>%
ggplot(mapping = aes(x = calculated_host_listings_count, y = reviews_per_month)) +
  geom_point() +
  facet_grid(room_type ~ avail)
```

### Section 3. Research questions

How does location (borough and neighborhood, for example) influence the price of a listing?

How does the way in which a property is listed (type of room, for example) influence the availability of a listing?

### Section 4. Data

Used the glimpse function to show information about and part of abnb:

```{r glimpse}
glimpse(abnb)
```

